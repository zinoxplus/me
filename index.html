<!DOCTYPE html>
.controls i{font-size:32px;margin:15px;cursor:pointer;color:#0ff;transition:.3s}
.controls i:hover{transform:scale(1.3)}
#visualizer{width:100%;height:120px;margin-top:15px;border-radius:15px;background:#05070c}
#spotifyBox{display:none;margin-top:20px}
.beat{animation:beat 1s infinite}
@keyframes beat{0%{box-shadow:0 0 20px #0ff}50%{box-shadow:0 0 50px #0ff}100%{box-shadow:0 0 20px #0ff}}
</style>
</head>
<body onclick="unlock()">


<div class="bg"></div>
<div class="overlay"></div>
<canvas id="rain"></canvas>


<div class="container">
<div class="player" id="player">
<h1>LMC MUSIC</h1>
<audio id="audio" autoplay muted></audio>


<div class="controls">
<i class="fa fa-backward" onclick="prev()"></i>
<i class="fa fa-play" onclick="play()"></i>
<i class="fa fa-stop" onclick="stopMusic()"></i>
<i class="fa fa-forward" onclick="next()"></i>
</div>


<input type="range" min="0" max="1" step="0.01" onchange="audio.volume=this.value">
<canvas id="visualizer"></canvas>


<div id="spotifyBox">
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/1H0qeS3e8pJMc0zpD4lQiU" width="100%" height="352" frameborder="0" allow="autoplay; encrypted-media"></iframe>
</div>
</div>
</div>


<script>
const audio=document.getElementById('audio');
const spotifyBox=document.getElementById('spotifyBox');
const player=document.getElementById('player');


const tracks=[
{type:'mp3',src:'https://dl.godpori.com/04/05/Mvshreghi%20-%20Vasam%20Ajib%20Bood%20[128].mp3'},
{type:'spotify'}
];
let index=0;


function load(){
if(tracks[index].type==='mp3'){
spotifyBox.style.display='none';
audio.src=tracks[index].src;
audio.play();
player.classList.add('beat');
}else{
audio.pause();
audio.src='';
spotifyBox.style.display='block';
player.classList.remove('beat');
}
}
function play(){audio.play()}
function stopMusic(){audio.pause();audio.currentTime=0}
function next(){index=(index+1)%tracks.length;load()}
function prev(){index=(index-1+tracks.length)%tracks.length;load()}
function unlock(){audio.muted=false}
load();


// Visualizer
const ctx=new (window.AudioContext||window.webkitAudioContext)();
const src=ctx.createMediaElementSource(audio);
const analyser=ctx.createAnalyser();
src.connect(analyser);analyser.connect(ctx.destination);
const v=document.getElementById('visualizer');const c=v.getContext('2d');
function draw(){requestAnimationFrame(draw);c.clearRect(0,0,v.width,v.height);const d=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(d);d.forEach((b,i)=>{c.fillStyle='#0ff';c.fillRect(i*8,v.height-b/2,6,b/2)})}
v.width=v.offsetWidth;v.height=v.offsetHeight;draw();


// Rain Drops
const r=document.getElementById('rain');const rc=r.getContext('2d');r.width=innerWidth;r.height=innerHeight;
const drops=[];for(let i=0;i<200;i++)drops.push({x:Math.random()*r.width,y:Math.random()*r.height,l:Math.random()*20});
setInterval(()=>{rc.clearRect(0,0,r.width,r.height);rc.strokeStyle='#0ff6';drops.forEach(d=>{rc.beginPath();rc.moveTo(d.x,d.y);rc.lineTo(d.x,d.y+d.l);rc.stroke();d.y+=8;if(d.y>r.height)d.y=0})},30);
</script>
</body>
</html>
